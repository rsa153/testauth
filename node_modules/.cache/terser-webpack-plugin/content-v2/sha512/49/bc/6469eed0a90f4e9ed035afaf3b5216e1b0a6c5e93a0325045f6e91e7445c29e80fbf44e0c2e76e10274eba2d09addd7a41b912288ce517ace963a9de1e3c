{"map":"{\"version\":3,\"sources\":[\"/Users/rsa153/Desktop/testauth/src/index.js\"],\"names\":[\"User\",\"_ref\",\"name\",\"data\",\"react__WEBPACK_IMPORTED_MODULE_7___default\",\"a\",\"createElement\",\"Demo\",\"props\",\"_this\",\"Object\",\"_Users_rsa153_Desktop_testauth_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__\",\"this\",\"_Users_rsa153_Desktop_testauth_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__\",\"_Users_rsa153_Desktop_testauth_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__\",\"call\",\"state\",\"currentUser\",\"setupStitch\",\"appId\",\"client\",\"Stitch\",\"hasAppClient\",\"getAppClient\",\"initializeAppClient\",\"auth\",\"hasRedirectResult\",\"handleRedirectResult\",\"catch\",\"console\",\"error\",\"log\",\"isLoggedIn\",\"user\",\"setState\",\"credential\",\"GoogleRedirectCredential\",\"loginWithRedirect\",\"profile\",\"React\",\"Component\",\"ReactDOM\",\"render\",\"document\",\"getElementById\"],\"mappings\":\"+OAQQA,EAAO,SAAAC,GAAA,IAASC,EAATD,EAAGE,KAAH,OAAoBD,GAAQE,EAAAC,EAAAC,cAAA,MAAA,KAAKF,EAAAC,EAAAC,cAAA,MAAA,KAAMJ,KAG9CK,cACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KACDQ,MAAQ,CACXC,aAAa,GAHER,2MAQXG,KAAKM,2QAQLC,EAAQ,8BAGRC,EAASC,EAAAA,EAAOC,aAAaH,GAC/BE,EAAAA,EAAOE,aAAaJ,GACpBE,EAAAA,EAAOG,oBAAoBL,IAMpBM,KAAKC,oDACRN,EAAOK,KAAKE,uBAAuBC,MAAMC,QAAQC,cACvDD,QAAQE,IAAI,qCAGVX,EAAOK,KAAKO,YAEdf,YAAcG,EAAOK,KAAKQ,KAC1BrB,KAAKsB,SAAS,CAAEjB,YAAAA,gBAGVkB,EAAa,IAAIC,EAAAA,EACvBhB,EAAOK,KAAKY,kBAAkBF,uIAKzB,IACClB,EAAgBL,KAAKI,MAArBC,YACR,OAAQA,EAEJb,EAAAC,EAAAC,cAACN,EAAD,CAAMsC,QAASrB,EAAYqB,UAD3BlC,EAAAC,EAAAC,cAAA,MAAA,KAAA,kCAhDWiC,EAAAA,EAAMC,WAuDzBC,EAAAA,EAASC,OACPtC,EAAAC,EAAAC,cAACC,EAAD,MACAoC,SAASC,eAAe\",\"sourcesContent\":[\"  import React from 'react';\\n  import ReactDOM from 'react-dom';\\n\\n  //start stitch import\\n  import { Stitch, GoogleRedirectCredential } from \\\"mongodb-stitch-browser-sdk\\\";\\n  //end stitch import\\n\\n  // Create a component to display google auth user information\\n  const User = ({ data: name }) => name && <div><pre>{name}</pre></div>\\n\\n  // Create the main component\\n  class Demo extends React.Component {\\n    constructor(props) {\\n      super(props);\\n      this.state = {\\n        currentUser: false\\n      }\\n    }\\n\\n    async componentDidMount() {\\n      await this.setupStitch();\\n    }\\n\\n    //start stitch setup\\n    async setupStitch() {\\n      //copy the name of your google-auth enabled stitch application here\\n      //the name of the app will typically be the stitch application name\\n      //with a \\\"-\\\"\\\" + random string appended\\n      const appId = 'authentication_test-htbrq';\\n\\n      // Get a client for your Stitch app, or instantiate a new one\\n      const client = Stitch.hasAppClient(appId)\\n        ? Stitch.getAppClient(appId)\\n        : Stitch.initializeAppClient(appId);\\n\\n      //manage user authentication state\\n      \\n      // Check if this user has already authenticated and we're here\\n      // from the redirect. If so, process the redirect to finish login.\\n      if (client.auth.hasRedirectResult()) {\\n        await client.auth.handleRedirectResult().catch(console.error);\\n        console.log(\\\"Processed redirect result.\\\")\\n      }\\n\\n      if (client.auth.isLoggedIn) {\\n        // The user is logged in. Add their user object to component state.\\n        currentUser = client.auth.user;\\n        this.setState({ currentUser });\\n      } else {\\n        // The user has not yet authenticated. Begin the Google login flow.\\n        const credential = new GoogleRedirectCredential();\\n        client.auth.loginWithRedirect(credential);\\n      }\\n    }\\n    //end stitch setup\\n\\n    render() {\\n      const { currentUser } = this.state;\\n      return !currentUser\\n        ? <div>User must authenticate.</div>\\n        : <User profile={currentUser.profile}/>\\n    }\\n  }\\n\\n  // ========================================\\n     \\n  ReactDOM.render(\\n    <Demo />,\\n    document.getElementById('root')\\n  );\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(18)},18:function(e,t,n){\"use strict\";n.r(t);var r=n(4),a=n.n(r),c=n(7),u=n(10),i=n(11),s=n(15),o=n(12),l=n(16),p=n(2),h=n.n(p),d=n(13),f=n.n(d),b=n(5),v=function(e){var t=e.data;return t&&h.a.createElement(\"div\",null,h.a.createElement(\"pre\",null,t))},m=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(s.a)(this,Object(o.a)(t).call(this,e))).state={currentUser:!1},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:\"componentDidMount\",value:function(){var e=Object(c.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setupStitch();case 2:case\"end\":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:\"setupStitch\",value:function(){var e=Object(c.a)(a.a.mark(function e(){var t,n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=\"authentication_test-htbrq\",!(n=b.b.hasAppClient(t)?b.b.getAppClient(t):b.b.initializeAppClient(t)).auth.hasRedirectResult()){e.next=6;break}return e.next=5,n.auth.handleRedirectResult().catch(console.error);case 5:console.log(\"Processed redirect result.\");case 6:n.auth.isLoggedIn?(currentUser=n.auth.user,this.setState({currentUser:currentUser})):(r=new b.a,n.auth.loginWithRedirect(r));case 7:case\"end\":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:\"render\",value:function(){var e=this.state.currentUser;return e?h.a.createElement(v,{profile:e.profile}):h.a.createElement(\"div\",null,\"User must authenticate.\")}}]),t}(h.a.Component);f.a.render(h.a.createElement(m,null),document.getElementById(\"root\"))}},[[17,2,1]]]);","extractedComments":[]}